{{ header }}{{ git_hidden_tag }}
<style>
nav, header {
	display: none;
}
footer {
	display: none;
}
.content-top-breadcum {
	display: none;
}
#powered {
	display: none;
}
#container {
	width: 850px;
}
.top_button {
	display:none !important;
}
</style>

<style type="text/css">
.quick-view {
  padding-top: 10px;
  padding-left: 0px;
  padding-bottom: 10px;
  vertical-align: top;
  display: block;
  padding-right: 10px;
}

.product-right,
.product-title,
.qv-product_desc,
.short-desc,
.rating-wrapper,
.fa-stack {
  padding: 0px 0px 0px 0px;
  margin: 0px 0px 0px 0px;
}

.custom-input-qty {
  width:50px;
}

.all-input-qty {
  width: 50px;
  height: 30px;
  text-align: center;
  font-size: 14px;
  margin: 0px 0px 10px 0px;
}

.ot_total-text {
  text-align: right;
  height:30px;
  border-right:1px solid #cccccc;
}

.ot_total-input {
  vertical-align: middle;
  text-align: center;
  border-right: 1px solid #cccccc;
  border-bottom: 1px solid #cccccc;
  border-top: 1px solid #cccccc;
  width:90px;
}

#pre-pack-table {
  font-size: 12px;
}	

#pre-pack-table tbody tr td {
  text-align: center;
  padding: 0px 0px 0px 0px;
  margin: 0px 0px 0px 0px;
  inline-height: 12px;
}

#pre-pack-table tbody tr td input {
  width: 50px;
  box-sizing: border-box;
  border: 1px solid #eee;
  border-radius: 3px;
  background-color: #faf5f2;
  text-align: center;
}

#pre-pack-table .color-name {
  text-align: left;
  padding-left: 5px;
}

.pack-option-image {
  cursor: pointer;
}

.pack-option-image:hover {
  color: #FF6EAB;
  font-weight: 700;
}

#pack-price,
#pack-amount {
  text-align: right;
  padding: 0px 5px 0px 0px;
  margin: 0px 0px 0px 0px;
}

#pack-qty {
  margin: 0px;
  padding: 0px;
  width: 10px;
}
</style>
	  
<div class="quick-view">
<div class="quick-view-container">
  
  
    <div id="content" class="productpage-quick-view pro-product-info">{{ content_top }}
      <div class="">
        <h2 class="page-title">{{ heading_title }}</h2>
		        
		<div class="col-sm-6 product-left">
		<div class="product-info">
         {% if thumb or images %}
    <div class="left product-image thumbnails">
      {% if thumb %}
	  <!-- Megnor Cloud-Zoom Image Effect Start -->
	  	<div class="image"><a class="thumbnail" title="{{ heading_title }}"><img id="tmzoom" src="{{ thumb }}" data-zoom-image="{{ popup }}" title="{{ heading_title }}" alt="{{ heading_title }}" /></a></div> 
      {% endif %}
      {% if images %} 
		{% set sliderFor = 3 %}
		{% set imageCount = images|length %}			 
	  {% endif %}		  	  
		<div class="additional-carousel">  
      {% if imageCount >= sliderFor %}
      <div class="customNavigation">
        <span class="fa prev fa-arrow-left">&nbsp;</span>
        <span class="fa next fa-arrow-right">&nbsp;</span>
      </div>
     {% endif %}        
      <div id="additional-carousel" class="image-additional {% if imageCount >= sliderFor %}product-carousel{% endif %}">
          
      <div class="slider-item">
        <div class="product-block">   
          <a href="{{ popup }}" title="{{ heading_title }}" class="elevatezoom-gallery" data-image="{{ thumb }}" data-zoom-image="{{ popup }}"><img src="{{ thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" /></a>
        </div>
        </div>    
        
      {% for  image in images %}
        <div class="slider-item">
        <div class="product-block">   
              <a href="{{ image.popup }}" title="{{ heading_title }}" class="elevatezoom-gallery" data-image="{{ image.thumb }}" data-zoom-image="{{ image.popup }}"><img src="{{ image.thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" /></a>
        </div>
        </div>    
          {% endfor %}        
        </div>
      <span class="additional_default_width" style="display:none; visibility:hidden"></span>
		</div>
  

	<!-- Megnor Cloud-Zoom Image Effect End-->
    </div>
    {% endif %}
		
	</div>
        </div>

        <div class="col-sm-6 product-right">
          <h3 class="product-title">{{ model }}</h3>

					<ul class="list-unstyled qv-product_desc">
						<li>{{ heading_title }}</li>
					</ul>

		  
		  {% if review_status %}
          <div class="rating-wrapper">            
              {% for i in 1..5 %}
              {% if rating < i %}
			  <span class="fa fa-stack"><i class="fa fa-star off fa-stack-2x"></i></span>
               {% else %}
         <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span>
			  {% endif %}
              {% endfor %}
		  </div>
          {% endif %}
		  
          <ul class="list-unstyled short-desc">
            {% if manufacturer %}
            <li><span class="desc">{{ text_manufacturer }}</span><a href="{{ manufacturers }}">{{ manufacturer }}</a></li>
            {% endif %}
            {# <li><span class="desc">{{ text_model }}</span>{{ model }}</li> #}
            {% if reward %}
            <li><span class="desc">{{ text_reward }}</span>{{ reward }}</li>
            {% endif %}
            {#<li><span class="desc">{{ text_stock }}</span>{{ stock }}</li>#}
          </ul>
		  
		  
		 {% if price %}
          <ul class="list-unstyled">
            {% if not special %}
            <li>
              <h4 class="product-price pro-price">{{ price }}</h4>
            </li>
            {% else %}
            <li>
			<span class="old-price pro-price" style="text-decoration: line-through;">{{ price }}</span> 
            <h4 class="special-price pro-price">{{ special }}</h4>
            </li>
            {% endif %}
            {% if tax %}
            <li class="price-tax">{{ text_tax }}<span>{{ tax }}</span></li>
            {% endif %}
            {% if points %}
            <li class="rewardpoint">{{ text_points }} {{ points }}</li>
            {% endif %}
            {% if discounts %}
            <li>
            </li>
            {% for discount in discounts %}
            <li class="discount">{{ discount.quantity }}{{ text_discount }}{{ discount.price }}</li>
            {% endfor %}
            {% endif %}
          </ul>
          {% endif %}
         
          <div id="product2">
           {% if options %}

			<div class="pro-options">
			
            <hr>
            <h3>{{ text_option_color }}</h3>

<style type="text/css">
.option-color-table {
	display:table;
	float: left;
	margin: 0px 0px 15px 0px;
	width:100%;
}
.option-color-row {
	display: table-row;
	float: left;
	width:100%;
}
.option-color-cell {
	display: table-cell;
	float:left;
	width:45px;
	margin: 3px 3px 3px 3px;
}
</style>

		<div id="option color-gallery" class="option-color-table">
			<div id="input-color" class="option-color-row">
			{% for option in options %}
			{% if option.option_id == '1' %}}
			{% for option_value in option.product_option_value %}
				<div class="hint--top ps btn-color option-color-cell" data-toggle="tooltip" data-image="{{ option_value.option_image }}" data-zoom-image="{{ option_value.option_image }}" title="{{ option_value.name }}">
					<img class="lazy psi" alt="{{ option_value.name }}" src="{{ option_value.option_image_color_swatch }}" itemprop="image" />
				</div>
			{% endfor %}
			{% endif %}
			{% endfor %}
			</div>
		</div>

<script>
$(".btn-color").click(function(){
	var newImg=$(this).attr('data-zoom-image');
	if(newImg!='NA'){
		changeImage(newImg);
	}
	return true;
});

function changeImage(newImgSrc) {
  $(".thumbnail").attr('href',newImgSrc);
  $("#tmzoom").attr('src',newImgSrc);
  $(".zoomWindow").css("background-image", "url(" + newImgSrc + ")");
}

$(document).on("click", ".pack-option-image", function() {
	var newImg=$(this).attr('data-image');
	if(newImg!='NA'){
		changeImage(newImg);
	}
	return true;
});
</script>
		
            {% for option in options %}
            {% if option.type == 'select' %}
            <div class="form-group{% if option.required %} required{% endif %} pro-option" master-option="{{ option.master_option }}" option="{{ option.option_id }}" id="option-{{ option.product_option_id }}">
              <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
              <select name="option[{{ option.product_option_id }}]" id="input-option{{ option.product_option_id }}" class="form-control">
                <option value="">{{ text_select }}</option>
                {% for option_value in option.product_option_value %}
                <option value="{{ option_value.product_option_value_id }}" master-option-value="{{ option_value.master_option_value }}" option-value="{{option_value.product_option_value_id }}" {% if PRO_status and PRO_settings.buy_out_of_stock == 0 and option_value.quantity is defined and option_value.quantity <= 0 %} disabled {% endif %}> {{ option_value.name }}
                {% if option_value.price %}
                ({{ option_value.price_prefix }}{{ option_value.price }})
                {% endif %} </option>
                {% endfor %}
              </select>
            </div>
            {% endif %}
            {% if option.type == 'radio' %}
						<div class="ot_btn_all" style="margin-bottom:0;">APPLY ALL PACKS&nbsp;
              <input type="text" class="all-input-qty" id="all-input-qty" name="all-input-qty" value="" placeholder="0" onfocus="this.placeholder=''" onblur="this.placeholder='0'" />
					</div>
						<table class="table table-bordered table-hover qv-table" id="pre-pack-table">
							<thead>
								<tr class="pack_label">
									<td class="pack">Color</td>
									<td class="pack qty" id="pack-qty">S</td>
									<td class="pack qty" id="pack-qty">M</td>
									<td class="pack qty" id="pack-qty">L</td>
									<td class="pack price" id="pack-price">$/Piece</td>
									<td class="pack">Piece Qty</td>
									<td class="pack" id="pack-amount">Amount</td>
									<td class="pack">Pack</td>
								</tr>
							</thead>
							<tbody>
							{% for option_value in option.product_option_value %}
								<tr class="pack_field">
								<input type="hidden" name="option[{{ option.product_option_id }}]" value="{{ option_value.product_option_value_id }}" />
								<input type="hidden" name="product_id" value="{{ product_id }}" />
								<input type="hidden" name="option_value_stock_{{ option_value.product_option_value_id }}" value="{{ option_value.stock }}" />
									<td class="pack color-name"><span class="pack-option-image" data-image="{{ option_value.option_image }}" data-id="{{ option_value.product_option_value_id }}">{{ option_value.name }}</span></td>
									<td class="pack qty" id="pack-qty">2</td>
									<td class="pack qty" id="pack-qty">2</td>
									<td class="pack qty" id="pack-qty">2</td>
								<input type="hidden" id="piece_price_{{ option_value.product_option_value_id }}" value="{{ price_no_sign + option_value.price_no_sign }}" />
								<input type="hidden" id="pack_qty_{{ option_value.product_option_value_id }}" value="6" />
								<input type="hidden" id="pack_price_{{ option_value.product_option_value_id }}" value="{{ (price_no_sign + option_value.price_no_sign) * 6 }}" />
								<input type="hidden" id="quantity_{{ option_value.product_option_value_id }}" name="quantity" value="0" />
									<td class="pack price" id="pack-price">${{ price_no_sign + option_value.price_no_sign }}</td>
									<td class="pack"><span id="total_pack_piece_{{ option_value.product_option_value_id }}">0</span></td>
									<td class="pack" id="pack-amount">$<span id="total_piece_amount_{{ option_value.product_option_value_id }}">0</span></td>
									<td class="pack qty input">
								<input type="" min="0" class="custom-input-qty" name="pack_quantity" rel="{{ option_value.product_option_value_id }}" value="" placeholder="0" onfocus="this.placeholder=''" onblur="this.placeholder='0'" />
									</td>
								</tr>
							{% endfor %}
							</tbody>
						</table>
					<div class="option" id="pack" style="margin-bottom:0;padding-top:0;">
						<table class="table table-bordered table-hover">
							<tr>
								<td class="ot_total-text">Total&nbsp;<span id="total_qty"></span> Pcs (<span id="total_pack"></span> Packs)</td>
								<td class="ot_total-input">$<span id="total_amount"></span></td>
							</tr>
						</table>
					</div>
            <script type="text/javascript">
            function updateTotal(){
              var total_qty=0;
              var total_pack=0;
              var total_amount=0.0;
              $(".custom-input-qty").each(function(){
                var this_value = $(this).val();
                if(this_value<=0){ this_value=0; }
                var this_rel = $(this).attr("rel");
                var piece_price = $("#piece_price_" + this_rel).val();
                var pack_price = $("#pack_price_" + this_rel).val();
                var pack_qty = $("#pack_qty_" + this_rel).val();
                $("#total_pack_piece_" + this_rel).html(this_value*pack_qty);
                $("#quantity_" + this_rel).val(this_value*pack_qty);
                $("#total_piece_amount_" + this_rel).html((pack_price*this_value).toFixed(2));
                total_qty += this_value*pack_qty;
                total_pack += parseInt(this_value);
                total_amount += parseFloat(pack_price*this_value);
              });
              $("#total_qty").html(total_qty);
              $("#total_pack").html(total_pack);
              $("#total_amount").html(total_amount.toFixed(2));
            }
            function applyall(){
              $(".custom-input-qty").each(function(){
                var this_value = $("#all-input-qty").val();
                if(this_value <= 0){
                  this_value=0;
                  $("all-input-qty").val(0);
                }
                $(".custom-input-qty").val(this_value);
                updateTotal();
              });
            }
            $(".custom-input-qty").keyup(function(){
              updateTotal();
            });
            $(".all-input-qty").keyup(function(){
              applyall();
            });
            $(document).ready(function(){
              updateTotal();
            });
            </script>
            {#
            <div class="form-group{% if option.required %} required{% endif %} pro-option" master-option="{{ option.master_option }}" option="{{ option.option_id }}" id="option-{{ option.product_option_id }}">
              <label class="control-label">{{ option.name }}</label>
              <div id="input-option{{ option.product_option_id }}"> {% for option_value in option.product_option_value %}
                <div class="radio">
                  <label for="option-value-{{ option_value.product_option_value_id }}">
                    <input type="radio" name="option[{{ option.product_option_id }}]" value="{{ option_value.product_option_value_id }}" id="option-value-{{ option_value.product_option_value_id }}" master-option-value="{{ option_value.master_option_value }}" option-value="{{option_value.product_option_value_id }}" {% if PRO_status and PRO_settings.buy_out_of_stock == 0 and option_value.quantity is defined and option_value.quantity <= 0 %} disabled {% endif %} />
                    {% if option_value.image %} <img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail" /> {% endif %}                  
                    {{ option_value.name }}
                    {% if option_value.price %}
                    ({{ option_value.price_prefix }}{{ option_value.price }})
                    {% endif %} </label>
                </div>
                {% endfor %} </div>
            </div>
#}
            {% endif %}
            {% if option.type == 'checkbox' %}

{#
			
            <div class="form-group{% if option.required %} required{% endif %} pro-option" master-option="{{ option.master_option }}" option="{{ option.option_id }}" id="option-{{ option.product_option_id }}">
              <label class="control-label">{{ option.name }}</label>
              <div id="input-option{{ option.product_option_id }}"> {% for option_value in option.product_option_value %}
                <div class="checkbox">
                  <label for="option-value-{{ option_value.product_option_value_id }}">
                    <input type="checkbox" name="option[{{ option.product_option_id }}][]" value="{{ option_value.product_option_value_id }}" id="option-value-{{ option_value.product_option_value_id }}" master-option-value="{{ option_value.master_option_value }}" option-value="{{option_value.product_option_value_id }}" {% if PRO_status and PRO_settings.buy_out_of_stock == 0 and option_value.quantity is defined and option_value.quantity <= 0 %} disabled {% endif %} />
                    {% if option_value.image %} <img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail" /> {% endif %}
                    {{ option_value.name }}
                    {% if option_value.price %}
                    ({{ option_value.price_prefix }}{{ option_value.price }})
                    {% endif %} </label>
                </div>
                {% endfor %} </div>
            </div>

#}
			
            {% endif %}
            {% if option.type == 'text' %}
            <div class="form-group{% if option.required %} required{% endif %} pro-option" master-option="{{ option.master_option }}" option="{{ option.option_id }}" id="option-{{ option.product_option_id }}">
              <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
              <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control" master-option-value="{{ option.master_option_value }}" {% if PRO_status and PRO_settings.buy_out_of_stock == 0 and option_value.quantity is defined and option_value.quantity <= 0 %} disabled {% endif %} />
            </div>
            {% endif %}
            {% if option.type == 'textarea' %}
            <div class="form-group{% if option.required %} required{% endif %} pro-option" master-option="{{ option.master_option }}" option="{{ option.option_id }}" id="option-{{ option.product_option_id }}">
              <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
              <textarea name="option[{{ option.product_option_id }}]" rows="5" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control" master-option-value="{{ option.master_option_value }}" {% if PRO_status and PRO_settings.buy_out_of_stock == 0 and option_value.quantity is defined and option_value.quantity <= 0 %} disabled {% endif %}>{{ option.value }}</textarea>
            </div>
            {% endif %}
            {% if option.type == 'file' %}
            <div class="form-group{% if option.required %} required{% endif %} pro-option" master-option="{{ option.master_option }}" option="{{ option.option_id }}" id="option-{{ option.product_option_id }}">
              <label class="control-label">{{ option.name }}</label>
              <button type="button" id="button-upload{{ option.product_option_id }}" data-loading-text="{{ text_loading }}" class="btn btn-default btn-block" master-option-value="{{ option.master_option_value }}" {% if PRO_status and PRO_settings.buy_out_of_stock == 0 and option_value.quantity is defined and option_value.quantity <= 0 %} disabled {% endif %}><i class="fa fa-upload"></i> {{ button_upload }}</button>
              <input type="hidden" name="option[{{ option.product_option_id }}]" value="" id="input-option{{ option.product_option_id }}" />
            </div>
            {% endif %}
            {% if option.type == 'date' %}
            <div class="form-group{% if option.required %} required{% endif %} pro-option" master-option="{{ option.master_option }}" option="{{ option.option_id }}" id="option-{{ option.product_option_id }}">
              <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
              <div class="input-group date">
                <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="YYYY-MM-DD" id="input-option{{ option.product_option_id }}" class="form-control" master-option-value="{{ option.master_option_value }}" {% if PRO_status and PRO_settings.buy_out_of_stock == 0 and option_value.quantity is defined and option_value.quantity <= 0 %} disabled {% endif %} />
                <span class="input-group-btn">
                <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                </span></div>
            </div>
            {% endif %}
            {% if option.type == 'datetime' %}
            <div class="form-group{% if option.required %} required{% endif %} pro-option" master-option="{{ option.master_option }}" option="{{ option.option_id }}" id="option-{{ option.product_option_id }}">
              <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
              <div class="input-group datetime">
                <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-option{{ option.product_option_id }}" class="form-control" master-option-value="{{ option.master_option_value }}" {% if PRO_status and PRO_settings.buy_out_of_stock == 0 and option_value.quantity is defined and option_value.quantity <= 0 %} disabled {% endif %} />
                <span class="input-group-btn">
                <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                </span></div>
            </div>
            {% endif %}
            {% if option.type == 'time' %}
            <div class="form-group{% if option.required %} required{% endif %} pro-option" master-option="{{ option.master_option }}" option="{{ option.option_id }}" id="option-{{ option.product_option_id }}">
              <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
              <div class="input-group time">
                <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="HH:mm" id="input-option{{ option.product_option_id }}" class="form-control" master-option-value="{{ option.master_option_value }}" {% if PRO_status and PRO_settings.buy_out_of_stock == 0 and option_value.quantity is defined and option_value.quantity <= 0 %} disabled {% endif %} />
                <span class="input-group-btn">
                <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                </span></div>
            </div>
            {% endif %}
            {% endfor %}

			</div>
			
            {% endif %}
            {% if recurrings %}
            <hr>
            <h3>{{ text_payment_recurring }}</h3>
            <div class="form-group required">
              <select name="recurring_id" class="form-control">
                <option value="">{{ text_select }}</option>
                {% for recurring in recurrings %}
                <option value="{{ recurring.recurring_id }}">{{ recurring.name }}</option>
                {% endfor %}
              </select>
              <div class="help-block" id="recurring-description"></div>
            </div>
            {% endif %}
            
          
		  
		   
		<div class="product-rightinfo">	
		             <div class="form-group cart">
              <div>
                <span class="qty"></span>
                <button type="button" id="button-cart" data-loading-text="Loading..." class="btn btn-primary btn-lg btn-block">
                  <span class="button-cart-text">Add to Cart</span>
                </button>
              </div>
            </div>
		  
			{#
		 
		  
			<div class="form-group cart-block">
              <label class="control-label qty" for="input-quantity">{{ entry_qty }}</label>
              <input type="text" name="quantity" value="{{ minimum }}" size="2" id="input-quantity" class="form-control" />
              <input type="hidden" name="product_id" value="{{ product_id }}" />
              
              <button type="button" id="button-cart2" data-loading-text="{{ text_loading }}" class="btn btn-primary btn-lg btn-block">{{ button_cart }}</button>
            </div>
#}
            {% if minimum > 1 %}
            <div class="alert alert-info"><i class="fa fa-info-circle"></i> {{ text_minimum }}</div>
            {% endif %}
            
			<div class="btn-group wish-comp">
            <button type="button" class="btn btn-default wishlist" title="{{ button_wishlist }}" onclick="wishlist.toggle(this, '{{ product_id }}');">{{ button_wishlist }}</button>
            <button type="button" class="btn btn-default compare" title="{{ button_compare }}" onclick="compare.add('{{ product_id }}');">{{ button_compare }}</button>
          </div>
		  		
		</div>
		</div>
		<div class="content_product_block">{{ product_block }} </div> 	
		</div>
	
		</div>
		</div>
		
          
	
     
    
	{{ content_bottom }}</div>
	</div>
</div>
<script type="text/javascript"><!--
$('select[name=\'recurring_id\'], input[name="quantity"]').change(function(){
	$.ajax({
		url: 'index.php?route=product/product/getRecurringDescription',
		type: 'post',
		data: $('input[name=\'product_id\'], input[name=\'quantity\'], select[name=\'recurring_id\']'),
		dataType: 'json',
		beforeSend: function() {
			$('#recurring-description').html('');
		},
		success: function(json) {
			$('.alert, .text-danger').remove();

			if (json['success']) {
				$('#recurring-description').html(json['success']);
			}
		}
	});
});
//--></script>
<script>
var flag = 0;

function ajaxCallBack(param){
  flag = flag + parseInt(param);
}

function alertCallBack(){
  if (flag > 0) {
    sweetAlert((flag*6).toString() + " items added to Cart");
  }
}

$( document ).ajaxStop(function() {
  alertCallBack();
});
			
$('#button-cart').on('click', function() {
  if($('.pack_field').length) {
    $('.pack_field').each(function() {
      if($(this).find('.custom-input-qty').val() > 0) {
        $.ajax({
          url: 'index.php?route=checkout/cart/add',
          type: 'post',
          data: $(this).find('input'),
          dataType: 'json',
          beforeSend: function() {
            $('#button-cart').button('loading');
          },
          complete: function() {
            $('#button-cart').button('reset');
          },
          success: function(json) {
            $('.alert-dismissible, .text-danger').remove();
            $('.form-group').removeClass('has-error');

            if (json['error']) {
              if (json['error']['pack']) {
                var element = $('#pack');
                element.before('<div class="text-danger" style="height:30px;margin:0;width:100%;padding-left:10px;padding-bottom:0;padding-top:0;line-height: 30px;" ><font color=red><b>*' + json['error']['pack'] + '</b></font></div>');
              }
              if (json['error']['option']) {
                for (i in json['error']['option']) {
                  var element = $('#input-option' + i.replace('_', '-'));

                  if (element.parent().hasClass('input-group')) {
                    element.parent().before('<div class="text-danger">' + json['error']['option'][i] + '</div>');
                  } else {
                    element.before('<div class="text-danger">' + json['error']['option'][i] + '</div>');
                  }
                }
              }

              if (json['error']['recurring']) {
                $('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');
              }

              // Highlight any found errors
              $('.text-danger').parent().addClass('has-error');
            }

            if (json['success']) {
                /*
			
              $.notify({
                message: json['success'],
                target: '_blank'
              },{
                // settings
                element: 'body',
                position: null,
                type: "info",
                allow_dismiss: true,
                newest_on_top: false,
                placement: {
                  from: "top",
                  align: "center"
                },
                offset: 0,
                spacing: 10,
                z_index: 2031,
                delay: 5000,
                timer: 1000,
                url_target: '_blank',
                mouse_over: null,
                animate: {
                  enter: 'animated fadeInDown',
                  exit: 'animated fadeOutUp'
                },
                onShow: null,
                onShown: null,
                onClose: null,
                onClosed: null,
                icon_type: 'class',
                template: '<div data-notify="container" class="col-xs-11 col-sm-3 alert alert-success" role="alert">' +
                  '<button type="button" aria-hidden="true" class="close" data-notify="dismiss">&nbsp;&times;</button>' +
                  '<span data-notify="message"><i class="fa fa-check-circle"></i>&nbsp; {2}</span>' +
                  '<div class="progress" data-notify="progressbar">' +
                    '<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
                  '</div>' +
                  '<a href="{3}" target="{4}" data-notify="url"></a>' +
                '</div>' 
              });

                */
			
              $('#cart > button').html('<div class="cart_image"></div><div class="cart-label"><span id="cart-total">' + json['total'] + '</span>'  + '</div>');

              //$('html, body').animate({ scrollTop: 0 }, 'slow');

              $('#cart > ul').load('index.php?route=common/cart/info ul li');
            }
              ajaxCallBack($('.custom-input-qty').val());
			
          },
              error: function(xhr, ajaxOptions, thrownError) {
                  alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
              }
        });
      }
    });
  } else {
    $.ajax({
      url: 'index.php?route=checkout/cart/add',
      type: 'post',
      data: $('#product input[type=\'text\'], #product input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea'),
      dataType: 'json',
      beforeSend: function() {
        $('#button-cart').button('loading');
      },
      complete: function() {
        $('#button-cart').button('reset');
      },
      success: function(json) {
        $('.alert-dismissible, .text-danger').remove();
        $('.form-group').removeClass('has-error');

        if (json['error']) {
          if (json['error']['pack']) {
            var element = $('#pack');
            element.before('<div class="text-danger" style="height:30px;margin:0;width:100%;padding-left:10px;padding-bottom:0;padding-top:0;line-height: 30px;" ><font color=red><b>*' + json['error']['pack'] + '</b></font></div>');
          }
          if (json['error']['option']) {
            for (i in json['error']['option']) {
              var element = $('#input-option' + i.replace('_', '-'));

              if (element.parent().hasClass('input-group')) {
                element.parent().before('<div class="text-danger">' + json['error']['option'][i] + '</div>');
              } else {
                element.before('<div class="text-danger">' + json['error']['option'][i] + '</div>');
              }
            }
          }

          if (json['error']['recurring']) {
            $('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');
          }

          // Highlight any found errors
          $('.text-danger').parent().addClass('has-error');
        }

        if (json['success']) {
                /*
			
          $.notify({
            message: json['success'],
            target: '_blank'
          },{
            // settings
            element: 'body',
            position: null,
            type: "info",
            allow_dismiss: true,
            newest_on_top: false,
            placement: {
              from: "top",
              align: "center"
            },
            offset: 0,
            spacing: 10,
            z_index: 2031,
            delay: 5000,
            timer: 1000,
            url_target: '_blank',
            mouse_over: null,
            animate: {
              enter: 'animated fadeInDown',
              exit: 'animated fadeOutUp'
            },
            onShow: null,
            onShown: null,
            onClose: null,
            onClosed: null,
            icon_type: 'class',
            template: '<div data-notify="container" class="col-xs-11 col-sm-3 alert alert-success" role="alert">' +
              '<button type="button" aria-hidden="true" class="close" data-notify="dismiss">&nbsp;&times;</button>' +
              '<span data-notify="message"><i class="fa fa-check-circle"></i>&nbsp; {2}</span>' +
              '<div class="progress" data-notify="progressbar">' +
                '<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
              '</div>' +
              '<a href="{3}" target="{4}" data-notify="url"></a>' +
            '</div>' 
          });

                */
			
          $('#cart > button').html('<div class="cart_image"></div><div class="cart-label"><span id="cart-total">' + json['total'] + '</span>'  + '</div>');

          //$('html, body').animate({ scrollTop: 0 }, 'slow');

          $('#cart > ul').load('index.php?route=common/cart/info ul li');
        }
              ajaxCallBack($('.custom-input-qty').val());
			
      },
          error: function(xhr, ajaxOptions, thrownError) {
              alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
          }
    });
  }
});
</script> 
<script type="text/javascript"><!--
$('#button-cart2').on('click', function() {
	$.ajax({
		url: 'index.php?route=checkout/cart/add',
		type: 'post',
		data: $('#product2 input[type=\'text\'], #product2 input[type=\'hidden\'], #product2 input[type=\'radio\']:checked, #product2 input[type=\'checkbox\']:checked, #product2 select, #product2 textarea'),
		dataType: 'json',
		beforeSend: function() {
			$('#button-cart2').button('loading');
		},
		complete: function() {
			$('#button-cart2').button('reset');
		},
		success: function(json) {
			$('.alert, .text-danger').remove();
			$('.form-group').removeClass('has-error');

			if (json['error']) {
				if (json['error']['option']) {
					for (i in json['error']['option']) {
						var element = $('#input-option' + i.replace('_', '-'));

						if (element.parent().hasClass('input-group')) {
							element.parent().before('<div class="text-danger">' + json['error']['option'][i] + '</div>');
						} else {
							element.before('<div class="text-danger">' + json['error']['option'][i] + '</div>');
						}
					}
				}

				if (json['error']['recurring']) {
					$('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');
				}

				// Highlight any found errors
				$('.text-danger').parent().addClass('has-error');
			}

		if (json['success']) {
				if (parent) {

				parent.$.notify({
					message: json['success'],
					target: '_blank'
				},{
					// settings
					element: 'body',
					position: null,
					type: "info",
					allow_dismiss: true,
					newest_on_top: false,
					placement: {
						from: "top",
						align: "center"
					},
					offset: 0,
					spacing: 10,
					z_index: 2031,
					delay: 5000,
					timer: 1000,
					url_target: '_blank',
					mouse_over: null,
					animate: {
						enter: 'animated fadeInDown',
						exit: 'animated fadeOutUp'
					},
					onShow: null,
					onShown: null,
					onClose: null,
					onClosed: null,
					icon_type: 'class',
					template: '<div data-notify="container" class="col-xs-11 col-sm-3 alert alert-success" role="alert">' +
						'<button type="button" aria-hidden="true" class="close" data-notify="dismiss">&nbsp;&times;</button>' +
						'<span data-notify="message"><i class="fa fa-check-circle"></i>&nbsp; {2}</span>' +
						'<div class="progress" data-notify="progressbar">' +
							'<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
						'</div>' +
						'<a href="{3}" target="{4}" data-notify="url"></a>' +
					'</div>' 
				});

					parent.$('#cart > button').html('<i class="fa fa-shopping-cart"></i> ' + json['total']);

				parent.$('#cart > ul').load('index.php?route=common/cart/info ul li');
					
				} else {
					
					$('#cart > button').html('<i class="fa fa-shopping-cart"></i> ' + json['total']);
					
					$('#cart > ul').load('index.php?route=common/cart/info ul li');
					
				};
				
				

				//$('html, body').animate({ scrollTop: 0 }, 'slow');

				
      }
		}
	});
});
//--></script>
<script type="text/javascript"><!--
$('.date').datetimepicker({
	pickTime: false
});

$('.datetime').datetimepicker({
	pickDate: true,
	pickTime: true
});

$('.time').datetimepicker({
	pickDate: false
});

$('button[id^=\'button-upload\']').on('click', function() {
	var node = this;

	$('#form-upload').remove();

	$('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

	$('#form-upload input[name=\'file\']').trigger('click');

	if (typeof timer != 'undefined') {
    	clearInterval(timer);
	}

	timer = setInterval(function() {
		if ($('#form-upload input[name=\'file\']').val() != '') {
			clearInterval(timer);

			$.ajax({
				url: 'index.php?route=tool/upload',
				type: 'post',
				dataType: 'json',
				data: new FormData($('#form-upload')[0]),
				cache: false,
				contentType: false,
				processData: false,
				beforeSend: function() {
					$(node).button('loading');
				},
				complete: function() {
					$(node).button('reset');
				},
				success: function(json) {
					$('.text-danger').remove();

					if (json['error']) {
						$(node).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');
					}

					if (json['success']) {
						alert(json['success']);

						$(node).parent().find('input').val(json['code']);
					}
				},
				error: function(xhr, ajaxOptions, thrownError) {
					alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
				}
			});
		}
	}, 500);
});
//--></script>
<script type="text/javascript"><!--
$('#review').delegate('.pagination a', 'click', function(e) {
  e.preventDefault();

    $('#review').fadeOut('slow');

    $('#review').load(this.href);

    $('#review').fadeIn('slow');
});

$('#review').load('index.php?route=product/product/review&product_id={{ product_id }}');

$('#button-review').on('click', function() {
	$.ajax({
		url: 'index.php?route=product/product/write&product_id={{ product_id }}',
		type: 'post',
		dataType: 'json',
		data: $("#form-review").serialize(),
		beforeSend: function() {
			$('#button-review').button('loading');
		},
		complete: function() {
			$('#button-review').button('reset');
		},
		success: function(json) {
			$('.alert-success, .alert-danger').remove();

			if (json['error']) {
				$('#review').after('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> ' + json['error'] + '</div>');
			}

			if (json['success']) {
				$('#review').after('<div class="alert alert-success"><i class="fa fa-check-circle"></i> ' + json['success'] + '</div>');

				$('input[name=\'name\']').val('');
				$('textarea[name=\'text\']').val('');
				$('input[name=\'rating\']:checked').prop('checked', false);
			}
		}
	});
});

//$(document).ready(function() {
//	$('.thumbnails').magnificPopup({
//		type:'image',
//		delegate: 'a',
//		gallery: {
//			enabled:true
//		}
//	});
//});


$(document).ready(function() {
if ($(window).width() > 767) {
		$("#tmzoom").elevateZoom({
				
				gallery:'additional-carousel',
				//inner zoom				 
								 
				zoomType : "inner", 
				cursor: "crosshair" 
				
				/*//tint
				
				tint:true, 
				tintColour:'#F90', 
				tintOpacity:0.5
				
				//lens zoom
				
				zoomType : "lens", 
				lensShape : "round", 
				lensSize : 200 
				
				//Mousewheel zoom
				
				scrollZoom : true*/
				
				
			});
		var z_index = 0;
     			    		
     			    		$(document).on('click', '.thumbnail', function () {
     			    		  $('.thumbnails').magnificPopup('open', z_index);
     			    		  return false;
     			    		});
			    		
     			    		$('.additional-carousel a').click(function() {
     			    			var smallImage = $(this).attr('data-image');
     			    			var largeImage = $(this).attr('data-zoom-image');
     			    			var ez =   $('#tmzoom').data('elevateZoom');	
     			    			$('.thumbnail').attr('href', largeImage);  
     			    			ez.swaptheimage(smallImage, largeImage); 
     			    			z_index = $(this).index('.additional-carousel a');
     			    			return false;
     			    		});
			
	}else{
		$(document).on('click', '.thumbnail', function () {
		$('.thumbnails').magnificPopup('open', 0);
		return false;
		});
	}
});
$(document).ready(function() {     
	$('.thumbnails').magnificPopup({
		delegate: 'a.elevatezoom-gallery',
		type: 'image',
		tLoading: 'Loading image #%curr%...',
		mainClass: 'mfp-with-zoom',
		gallery: {
			enabled: true,
			navigateByImgClick: true,
			preload: [0,1] // Will preload 0 - before current, and 1 after the current image
		},
		image: {
			tError: '<a href="%url%">The image #%curr%</a> could not be loaded.',
			titleSrc: function(item) {
				return item.el.attr('title');
			}
		}
	});
});

$('#tabs a').tabs();
$('#custom_tab a').tabs();
$('#top').remove();
$('.top_button').remove();


//--></script>

{% if PRO_status %}
<style>
.pro-option .radio,
.pro-option .checkbox {
	margin-top: 0;
	margin-bottom: 5px;
}
div[id^='input-option'] {
	margin-top: 10px;
}
</style>

<script>
let PRO_productData, PRO_optionsData, PRO_optionImages = {};
{% if PRO_config        is not empty %}PRO_config        = {{ PRO_config }};{% endif %}
{% if PRO_product_data  is not empty %}PRO_productData   = {{ PRO_product_data }};{% endif %}
{% if PRO_options_data  is not empty %}PRO_optionsData   = {{ PRO_options_data }};{% endif %}
{% if PRO_option_images is not empty %}PRO_optionImages  = {{ PRO_option_images }};{% endif %}
$(document).ready(function() {
	$('.pro-option[master-option!=0]').hide();
	$('div.pro-option, span.option-value').each(function() {
		$(this).css({
			WebkitTransition : 'none',
			MozTransition    : 'none',
			MsTransition     : 'none',
			OTransition      : 'none',
			transition       : 'none'
		});
	});
	$('.pro-option select').on('change', updateSelectOption);
	$('.pro-option input[type=radio]').on('change', updateRadioOption);
	$('.pro-option input[type=checkbox]').on('change', updateCheckboxOption);
	$('.pro-option input[type=text], .pro-option textarea').on('change', updateTextAndTextareaOption);
	function updateSelectOption() {
		//console.log('updateSelectOption');
		let option_value = $(this).children('option:selected').attr('option-value');
		let $related_options = $('.pro-option[master-option=' + $(this).parents('.pro-option').attr('option') + ']');
		if ($(this).val() != '') {
			updateOptionList($related_options, option_value);
			changeImage(option_value);
		} else {
			$related_options.slideUp();
		}
		clearOption($related_options);
	}
	function updateRadioOption() {
		//console.log('updateRadioOption');
		let option_value = $(this).attr('option-value');
		let $related_options = $('.pro-option[master-option=' + $(this).parents('.pro-option').attr('option') + ']');
		if ($('input[name=\'' + $(this).attr('name') + '\']:checked').length != '') {
			updateOptionList($related_options, option_value);
			changeImage(option_value);
		} else {
			$related_options.slideUp();
		}
		clearOption($related_options);
	}
	function updateCheckboxOption() {
		//console.log('updateCheckboxOption');
		let option_value_clicked = ($(this).is(':checked')) ? $(this).attr('option-value') : null;
		let option_value = [];
		$('.pro-option input[name=\'' + $(this).attr('name') + '\']:checked').each(function() {
			option_value.push($(this).attr('option-value'));
		});
		let $related_options = $('.pro-option[master-option=' + $(this).parents('.pro-option').attr('option') + ']');
		if ($('input[name=\'' + $(this).attr('name') + '\']:checked').length != '') {
			updateOptionList($related_options, option_value);
			changeImage(option_value_clicked);
		} else {
			$related_options.slideUp();
		}
		clearOption($related_options);
	}
	function updateTextAndTextareaOption() {
		//console.log('updateTextAndTextareaOption');
		let $related_options = $('.pro-option[master-option=' + $(this).parents('.pro-option').attr('option') + ']');
		if ($(this).val() != '') {
			$related_options.slideDown();
		} else {
			$related_options.slideUp();
		}
		clearOption($related_options);
	}
	function updateOptionList($related_options, option_value) {
		//console.log('updateOptionList');
		$related_options.find('option[master-option-value!=0]').each(function() {
			if ($(this).parent('span').length == 0) {
				$(this).wrap("<span>");
			}
		});
		let attr = $related_options.find('input[type=hidden]').attr('master-option-value');
		if (typeof attr !== typeof undefined && attr !== false) {
			$related_options.find('input[type=hidden][master-option-value!=0]').prev().prop('disabled', true);
		}
		$related_options.find('input[master-option-value!=0]').hide();
		$related_options.find('input[master-option-value!=0]').parent('label').parent('div').hide();
		$related_options.find('option[master-option-value][master-option-value!=0]').hide(); // Hide all select options that have a master-option-value attribute and it is not equal to 0
		$related_options.find('textarea[master-option-value!=0]').hide();
		if (typeof(option_value) == "string") {
			option_value = [option_value];
		}
		for (let i in option_value) {
			$related_options.find('option[master-option-value=' + option_value[i] + '], option[value=\'\']').each(function() {
				if ($(this).parent('span').length != 0) {
					$(this).unwrap();
				}
			});
			$related_options.find('input[type=hidden][master-option-value=' + option_value[i] + ']').prev().prop('disabled', false);

			//If standard radio and checkboxes (uncomment this line and comment next)
			$related_options.find('input[master-option-value=' + option_value[i] + ']').show();
			//If non-standard radio and checkboxes - do not display classic radio and checkboxes (uncomment this line and comment previous)
			//$related_options.find('input[master-option-value=' + option_value[i] + ']').not("input[type=radio], input[type=checkbox]").show();
			$related_options.find('input[master-option-value=' + option_value[i] + ']').parent('label').parent('div').show();
			$related_options.find('option[master-option-value=' + option_value[i] + ']').show();
			$related_options.find('textarea[master-option-value=' + option_value[i] + ']').show();
		}

		// If the block has no visible options - hide block, else show block
		$related_options.each(function() {
			let visible_options = 0;
			for (let i in option_value) {
				visible_options += $(this).find('[master-option-value=' + option_value[i] + ']').length * 1;
				visible_options += $(this).find('[master-option-value=0]').length * 1;
			}
			if ($(this).find('option, input, textarea').length != 0 && visible_options == 0) {
				$(this).slideUp();
			} else {
				$(this).slideDown();
			}
		});
	}

	function clearOption($option_container) {
		//console.log('clearOption');
		/*
		For templates without AJAX update price uncomment the lines with ".trigger("change")"
		and comment the lines with ".each(update...)".
		For templates with AJAX update, uncomment the lines with ".each(update...)"
		and comment the lines with ".trigger("change")".
		*/
		//find('..., li') - "li" for Journal 2, .removeClass('selected') - for Journal 2
		$option_container.find('select, li').removeClass('selected').val('').trigger("change");
		//$option_container.find('select, li').removeClass('selected').val('').each(updateSelectOption);
		$option_container.find('input[type=radio]:checked, input[type=checkbox]:checked, li').removeClass('selected').removeAttr('checked').trigger("change");
		//$option_container.find('input[type=radio]:checked, li').removeClass('selected').removeAttr('checked').each(updateRadioOption);
		//$option_container.find('input[type=checkbox]:checked, li').removeClass('selected').removeAttr('checked').each(updateCheckboxOption);
		$option_container.find('input[type=text], textarea').attr('value', '').val('').trigger("change");
		//$option_container.find('input[type=text], textarea').attr('value', '').val('').each(updateTextAndTextareaOption);
		$option_container.find('input[type=hidden][name^=option], li').removeClass('selected').attr('value', '');

{% if PRO_settings.price_adjustment_on is defined and PRO_settings.price_adjustment_on %}
		updatePrices();
{% endif %}
	}

{% if PRO_settings.price_adjustment_on is defined and PRO_settings.price_adjustment_on %}

	const animatePriceEnabled  = {{ PRO_settings.price_animate_on }},
		  multiplyPriceEnabled = {{ PRO_settings.price_multiply }};
	const optionsWrapper   = (PRO_config.option_selector)    ? PRO_config.option_selector       : '.pro-options',
		  $priceWrapper    = (PRO_config.price_selector)     ? $(PRO_config.price_selector)     : $('.pro-product-info .pro-price:first'),
		  $priceOldWrapper = (PRO_config.price_old_selector) ? $(PRO_config.price_old_selector) : $('.pro-product-info .pro-price-old:first'),
		  $quantityInput   = (PRO_config.quantity_selector)  ? $(PRO_config.quantity_selector)  : $('#input-quantity'),
		  $taxWrapper      = $(''),
		  $pointsWrapper   = $('');

	let currentPrice    = null,
		currentPriceOld = null;

	$quantityInput.on('change keyup', updatePrices);

	function updatePrices() {
		const PR = PRO_productData['price'],
			  SP = PRO_productData['special'],
			  MN = PRO_productData['minimum'],
			  DC = PRO_productData['decimal_place'],
			  DP = PRO_productData['decimal_point'],
			  TP = PRO_productData['thousand_point'],
			  SL = PRO_productData['symbol_left'],
			  SR = PRO_productData['symbol_right'];
		let quantity = 1;
		if (multiplyPriceEnabled) {
			quantity = +$quantityInput.val().trim();
			if (isNaN(quantity) || quantity < MN) {
				quantity = +MN;
			}
		}
		let initialPrice             = (SP != false) ? extractPrice(SP) : extractPrice(PR),
			priceToSpecialDifference = (SP != false) ? extractPrice(PR) - extractPrice(SP) : 0;
		let price = initialPrice + getAllOptionsPrices(initialPrice);
		let priceOld = price + priceToSpecialDifference;
		if (currentPrice == null) currentPrice = initialPrice * quantity;
		if (currentPriceOld == null) currentPriceOld = (initialPrice + priceToSpecialDifference) * quantity;
		if (animatePriceEnabled) {
			animatePrice($priceWrapper, currentPrice, price * quantity);
			animatePrice($priceOldWrapper, currentPriceOld, priceOld * quantity);
		} else {
			price    = formatPrice(price * quantity, DC, DP, TP, SL, SR);
			priceOld = formatPrice(priceOld * quantity, DC, DP, TP, SL, SR);
			showPrice($priceWrapper, price);
			showPrice($priceOldWrapper, priceOld);
		}
		currentPrice = price * quantity;
		currentPriceOld = priceOld * quantity;
	}

	// Calculation of the cost of all options
	function getAllOptionsPrices(initialPrice = 0) {
		let additionalPrice       =  0,
			additionalPricePrefix = '',
			productOptionValueId  =  0,
			difference            =  0;
		$(optionsWrapper + ' input[type="radio"]:checked, ' + optionsWrapper + ' input[type="checkbox"]:checked, ' + optionsWrapper + ' select>option:selected').each(function() {
			productOptionValueId = $(this).attr('option-value');
			if (!productOptionValueId) {
				return;
			}
			additionalPrice = extractPrice(PRO_optionsData[productOptionValueId].price);
			if (additionalPrice === false || additionalPrice === undefined || additionalPrice === null || additionalPrice == '') {
				return;
			}
			additionalPricePrefix = PRO_optionsData[productOptionValueId].price_prefix;
			if (additionalPricePrefix == '+') {
				difference += additionalPrice * 1;
			} else if (additionalPricePrefix == '-') {
				difference -= additionalPrice * 1;
			} else if (additionalPricePrefix == '=') {
				difference += additionalPrice * 1 - initialPrice;
				initialPrice = +additionalPrice;
			}
		});
		return difference;
	}

	// Price extraction, e.g. $1,499.99 -> 1499.99, 1 499,99. -> 1499.99
	function extractPrice(price = 0) {
		if (!price) {
			return 0;
		}
		return +price.split(PRO_productData['thousand_point']).join('')
				 .replace(PRO_productData['symbol_left'], '')
				 .replace(PRO_productData['symbol_right'], '')
				 .replace(PRO_productData['decimal_point'], '.');
	}

	// Formatting prices for regional settings, e.g. 1499.99 -> $1,499.99, 1499.99 -> 1 499,99.
	function formatPrice(price = 0, decimalPlaces = 2, decimalPoint = '.', thousandPoint = '', symbolLeft = '', symbolRight = '') {
		let p     = price.toFixed(decimalPlaces).replace('-', '').split('.'),
			chars = p[0].split("").reverse(),
			str   = '',
			count = 0;
		for (let i in chars) {
			count++;
			if (count%3 == 1 && count != 1) {
				str = chars[i] + thousandPoint + str;
			} else {
				str = chars[i] + str;
			}
		}
		let formattedPrice = 0;
		if (decimalPlaces > 0) {
			formattedPrice = str + decimalPoint + p[1];
		} else {
			formattedPrice = str;
		}
		if (price >= 0) {
			return symbolLeft + formattedPrice + symbolRight;
		} else {
			return '-' + symbolLeft + formattedPrice + symbolRight;
		}
	}

	// Function that displays the price (without animation)
	function showPrice(wrapper, price) {
		wrapper.text(price);
	}

	// Recursive function that animates price changes
	function animatePrice(wrapper, priceStart, PriceEnd, step = 0) {
		if (priceStart == PriceEnd) {
			return;
		}
		const DC = PRO_productData['decimal_place'],
			  DP = PRO_productData['decimal_point'],
			  TP = PRO_productData['thousand_point'],
			  SL = PRO_productData['symbol_left'],
			  SR = PRO_productData['symbol_right'];
		let stepCount = 15,
			stepDelay = 40, //ms between steps
			price     = priceStart;
		if (!step) {
			step = +((PriceEnd - priceStart) / stepCount).toFixed(DC);
		}
		price += step;
		if ((PriceEnd > priceStart && price >= PriceEnd) || (PriceEnd < priceStart && price <= PriceEnd) || !step) {
			priceFormatted = formatPrice(PriceEnd, DC, DP, TP, SL, SR);
			showPrice(wrapper, priceFormatted);
		} else {
			priceFormatted = formatPrice(price, DC, DP, TP, SL, SR);
			showPrice(wrapper, priceFormatted);
			setTimeout(animatePrice, stepDelay, wrapper, price, PriceEnd, step);
		}
	}
{% endif %}

{% if PRO_settings.option_image_change is defined and PRO_settings.option_image_change  %}

	function changeImage(optionValueId) {
		if(optionValueId in PRO_optionImages) {
			let $imagesAdditional = $('.image-additional');
			let $slide = $imagesAdditional.find('a[data-zoom-image="' + PRO_optionImages[optionValueId].image_large + '"]:first');
			if ($slide.length) {
				$slide.trigger('click');
			} else {
			
			}
		}
	}

{% else %}

	function changeImage() {
		return true;
	}

{% endif %}

});
</script>

{% endif %}
			

{#
			

<style>
nav, header {
    display: none;
}

footer {
    display: none;
}
.content-top-breadcum {
    display: none;
}
#powered {
    display: none;
}
#container {
    width: 850px;
}
.top_button { display:none !important; }

</style>


#}
			